[pytest]
# =============================================================================
# Configuration pytest pour Rakuten Product Classifier
# =============================================================================

# Répertoires de tests
testpaths = tests

# Patterns de fichiers
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# =============================================================================
# Markers personnalisés
# =============================================================================
markers =
    unit: Tests unitaires rapides et isolés
    integration: Tests d'intégration entre composants
    ml: Tests spécifiques Machine Learning
    e2e: Tests end-to-end avec navigateur
    slow: Tests lents (> 5 secondes)
    security: Tests de sécurité
    regression: Tests de non-régression
    smoke: Tests critiques (chemin principal)

# =============================================================================
# Options par défaut
# =============================================================================
addopts =
    -v
    --tb=short
    --strict-markers
    -ra
    --color=yes

# =============================================================================
# Timeout par test (secondes)
# =============================================================================
timeout = 30
timeout_method = thread

# =============================================================================
# Couverture de code
# =============================================================================
# Activer avec: pytest --cov
# --cov=utils
# --cov=pages
# --cov-report=html:coverage_report
# --cov-report=term-missing
# --cov-fail-under=80

# =============================================================================
# Logging
# =============================================================================
log_cli = false
log_cli_level = INFO
log_cli_format = %(asctime)s [%(levelname)s] %(message)s

# =============================================================================
# Cache
# =============================================================================
cache_dir = .pytest_cache

# =============================================================================
# Warnings
# =============================================================================
filterwarnings =
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning
